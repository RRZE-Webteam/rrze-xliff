!function(e){var t={};function r(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){var n=r(1);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},l=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),l.forEach(function(t){n(e,t,r[t])})}return e}},,function(e,t,r){"use strict";r.r(t);var n=r(1),l=r.n(n),a=r(2),o=r.n(a),i=r(0),c=wp.plugins.registerPlugin,f=wp.editPost.PluginPostStatusInfo,u=wp.components,d=u.Button,s=u.TextControl,p=u.Modal,m=u.Disabled,v=wp.compose.withState,y=wp.i18n.__,b=wp.element.Fragment;c("rrze-xliff",{render:function(){var e=window.location,t=new URL(e).searchParams.get("post"),r="".concat(e.protocol,"//").concat(e.host).concat(e.pathname,"?xliff-export=").concat(t),n=v({isOpen:!1,emailAddress:""})(function(n){var l=n.isOpen,a=n.emailAddress,o=n.setState;return Object(i.createElement)(b,null,Object(i.createElement)(d,{isTertiary:!0,onClick:function(){return o({isOpen:!0})}},y("Export","rrze-xliff")),l&&Object(i.createElement)(p,{title:y("Export post as XLIFF","rrze-xliff"),onRequestClose:function(){return o({isOpen:!1})}},Object(i.createElement)("p",null,Object(i.createElement)(d,{href:r,isDefault:!0},y("Download XLIFF file","rrze-xliff"))),Object(i.createElement)("p",null,Object(i.createElement)("strong",null,y("Or send the file to an email address:","rrze-xliff"))),Object(i.createElement)(s,{label:y("Email address","rrze-xliff"),value:a,onChange:function(e){return o({emailAddress:e})}}),Object(i.createElement)("p",null,Object(i.createElement)(d,{href:"".concat(e.protocol,"//").concat(e.host).concat(e.pathname,"?xliff-export=").concat(t,"&xliff_export_email_address=").concat(a),isDefault:!0},y("Send XLIFF file","rrze-xliff")))))});var a=v({isOpen:!1,hasFile:!1})(function(e){var t=e.isOpen,r=e.hasFile,n=e.setState,a=Object(i.createElement)(d,{isDefault:!0,id:"xliff-import-button",onClick:function(){return n({isOpen:!1})},hidden:"true"},y("Import","rrze-xliff"));return Object(i.createElement)(b,null,Object(i.createElement)(d,{isTertiary:!0,onClick:function(){return n({isOpen:!0})}},y("Import","rrze-xliff")),t&&Object(i.createElement)(p,{title:y("Import","rrze-xliff"),onRequestClose:function(){return n({isOpen:!1})}},Object(i.createElement)("input",{type:"file",id:"xliff-file",name:"xliff-file",accept:".xliff",onChange:function(e){!function(e){var t=new FileReader;t.onload=function(e){var t,r,n=(new DOMParser).parseFromString(e.target.result,"application/xml"),a=document.querySelector("#xliff-import-button"),i={};a.removeAttribute("hidden");var c=!0,f=!1,u=void 0;try{for(var d,s=n.childNodes[Symbol.iterator]();!(c=(d=s.next()).done);c=!0){var p=d.value;if("xliff"===p.nodeName){var m=!0,v=!1,y=void 0;try{for(var b,h=p.childNodes[Symbol.iterator]();!(m=(b=h.next()).done);m=!0){var x=b.value;if("file"===x.nodeName){var O=!0,w=!1,j=void 0;try{for(var g,E=x.childNodes[Symbol.iterator]();!(O=(g=E.next()).done);O=!0){var N=g.value;if("unit"===N.nodeName)if("title"===N.id){var S=!0,P=!1,F=void 0;try{for(var _,z=N.childNodes[Symbol.iterator]();!(S=(_=z.next()).done);S=!0){var C=_.value;if("segment"===C.nodeName){var k=!0,I=!1,D=void 0;try{for(var A,L=C.childNodes[Symbol.iterator]();!(k=(A=L.next()).done);k=!0){var M=A.value;"target"===M.nodeName&&(t=M.textContent)}}catch(e){I=!0,D=e}finally{try{k||null==L.return||L.return()}finally{if(I)throw D}}}}}catch(e){P=!0,F=e}finally{try{S||null==z.return||z.return()}finally{if(P)throw F}}}else if("body"===N.id){var R=!0,T=!1,X=void 0;try{for(var q,B=N.childNodes[Symbol.iterator]();!(R=(q=B.next()).done);R=!0){var U=q.value;if("segment"===U.nodeName){var G=!0,H=!1,J=void 0;try{for(var K,Q=U.childNodes[Symbol.iterator]();!(G=(K=Q.next()).done);G=!0){var V=K.value;"target"===V.nodeName&&(r=V.textContent)}}catch(e){H=!0,J=e}finally{try{G||null==Q.return||Q.return()}finally{if(H)throw J}}}}}catch(e){T=!0,X=e}finally{try{R||null==B.return||B.return()}finally{if(T)throw X}}}else if(0===N.id.indexOf("_meta_")){var W=!0,Y=!1,Z=void 0;try{for(var $,ee=N.childNodes[Symbol.iterator]();!(W=($=ee.next()).done);W=!0){var te=$.value;if("segment"===te.nodeName){var re=!0,ne=!1,le=void 0;try{for(var ae,oe=te.childNodes[Symbol.iterator]();!(re=(ae=oe.next()).done);re=!0){var ie=ae.value;"target"===ie.nodeName&&(i=Object.assign(i,l()({},"".concat(N.id.replace("_meta_","")),ie.textContent)))}}catch(e){ne=!0,le=e}finally{try{re||null==oe.return||oe.return()}finally{if(ne)throw le}}}}}catch(e){Y=!0,Z=e}finally{try{W||null==ee.return||ee.return()}finally{if(Y)throw Z}}}}}catch(e){w=!0,j=e}finally{try{O||null==E.return||E.return()}finally{if(w)throw j}}}}}catch(e){v=!0,y=e}finally{try{m||null==h.return||h.return()}finally{if(v)throw y}}}}}catch(e){f=!0,u=e}finally{try{c||null==s.return||s.return()}finally{if(f)throw u}}a.addEventListener("click",function(e){r=wp.blocks.parse(r),wp.data.dispatch("core/editor").resetBlocks([]),wp.data.dispatch("core/editor").insertBlocks(r),wp.data.dispatch("core/editor").editPost({title:t});var n=wp.data.select("core/editor").getEditedPostAttribute("meta");for(var a in i)wp.data.dispatch("core/editor").editPost({meta:o()({},n,l()({},a,i[a]))})})},t.readAsText(e[0])}(e.target.files),e.target.files?n({hasFile:!0}):n({hasFile:!1})}}),Object(i.createElement)("p",null,r?a:Object(i.createElement)(m,null,a))))});return Object(i.createElement)(f,{className:"rrze-xliff-export-and-import"},Object(i.createElement)("div",null,y("XLIFF:","rrze-xliff")," ",Object(i.createElement)(n,null)," ",Object(i.createElement)(a,null)))}})}]);