!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){var n=r(1);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){n(e,t,r[t])})}return e}},,function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(2),l=r.n(i),o=r(0),c=wp.plugins.registerPlugin,f=wp.editPost.PluginPostStatusInfo,u=wp.components,s=u.Button,d=u.TextControl,p=u.TextareaControl,m=u.Modal,v=u.Disabled,y=(u.Notice,wp.compose.withState),x=wp.i18n.__,b=wp.element.Fragment;c("rrze-xliff",{render:function(){var e=window.location,t=new URL(e).searchParams.get("post"),r="".concat(e.protocol,"//").concat(e.host).concat(e.pathname,"?xliff-export=").concat(t),n=void 0!==rrzeXliffJavaScriptData&&rrzeXliffJavaScriptData.email_address?rrzeXliffJavaScriptData.email_address:"",i=y({isOpen:!1,emailAddress:n,emailNote:""})(function(e){var n=e.isOpen,a=e.emailAddress,i=e.emailNote,l=e.setState;return Object(o.createElement)(b,null,Object(o.createElement)(s,{isTertiary:!0,onClick:function(){return l({isOpen:!0})}},x("Export","rrze-xliff")),n&&Object(o.createElement)(m,{title:x("Export post as XLIFF","rrze-xliff"),onRequestClose:function(){return l({isOpen:!1})}},Object(o.createElement)("p",null,Object(o.createElement)(s,{href:r,isDefault:!0},x("Download XLIFF file","rrze-xliff"))),Object(o.createElement)("p",null,Object(o.createElement)("strong",null,x("Or send the file to an email address:","rrze-xliff"))),Object(o.createElement)(d,{label:x("Email address","rrze-xliff"),value:a,onChange:function(e){return l({emailAddress:e})},id:"xliff_export_email_address"}),Object(o.createElement)(p,{label:x("Email text","rrze-xliff"),id:"email_export_note",value:i,onChange:function(e){return l({emailNote:e})}}),Object(o.createElement)("p",null,Object(o.createElement)(s,{onClick:function(){return function(e,r){var n=new XMLHttpRequest;document.querySelector("#xliff_export_email_button").setAttribute("disabled","disabled"),n.open("POST",ajaxurl,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.responseType="json",n.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&200===this.status&&(l({isOpen:!1}),n.response.length>0&&n.response.forEach(function(e){wp.data.dispatch("core/notices").createNotice(e.type,e.notice)}))},r=r.replace(/(\r\n|[\r\n])/g,"<br>"),n.send("_nonce=".concat(t,"&action=xliff_email_export&xliff_export_post=").concat(t,"&xliff_export_email_address=").concat(e,"&email_export_note=").concat(r))}(a,i)},isDefault:!0,id:"xliff_export_email_button"},x("Send XLIFF file","rrze-xliff")))))});var c=y({isOpen:!1,hasFile:!1})(function(e){var t=e.isOpen,r=e.hasFile,n=e.setState,i=Object(o.createElement)(s,{isDefault:!0,id:"xliff-import-button",onClick:function(){return n({isOpen:!1})},hidden:"true"},x("Import","rrze-xliff"));return Object(o.createElement)(b,null,Object(o.createElement)(s,{isTertiary:!0,onClick:function(){return n({isOpen:!0})}},x("Import","rrze-xliff")),t&&Object(o.createElement)(m,{title:x("Import","rrze-xliff"),onRequestClose:function(){return n({isOpen:!1})}},Object(o.createElement)("input",{type:"file",id:"xliff-file",name:"xliff-file",accept:".xliff",onChange:function(e){!function(e){var t=new FileReader;t.onload=function(e){var t,r,n=(new DOMParser).parseFromString(e.target.result,"application/xml"),i=document.querySelector("#xliff-import-button"),o={};i.removeAttribute("hidden");var c=!0,f=!1,u=void 0;try{for(var s,d=n.childNodes[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var p=s.value;if("xliff"===p.nodeName){var m=!0,v=!1,y=void 0;try{for(var x,b=p.childNodes[Symbol.iterator]();!(m=(x=b.next()).done);m=!0){var h=x.value;if("file"===h.nodeName){var O=!0,w=!1,j=void 0;try{for(var _,g=h.childNodes[Symbol.iterator]();!(O=(_=g.next()).done);O=!0){var E=_.value;if("unit"===E.nodeName)if("title"===E.id){var N=!0,S=!1,P=void 0;try{for(var z,C=E.childNodes[Symbol.iterator]();!(N=(z=C.next()).done);N=!0){var F=z.value;if("segment"===F.nodeName){var D=!0,k=!1,X=void 0;try{for(var I,L=F.childNodes[Symbol.iterator]();!(D=(I=L.next()).done);D=!0){var T=I.value;"target"===T.nodeName&&(t=T.textContent)}}catch(e){k=!0,X=e}finally{try{D||null==L.return||L.return()}finally{if(k)throw X}}}}}catch(e){S=!0,P=e}finally{try{N||null==C.return||C.return()}finally{if(S)throw P}}}else if("body"===E.id){var q=!0,A=!1,R=void 0;try{for(var M,B=E.childNodes[Symbol.iterator]();!(q=(M=B.next()).done);q=!0){var H=M.value;if("segment"===H.nodeName){var J=!0,U=!1,G=void 0;try{for(var K,Q=H.childNodes[Symbol.iterator]();!(J=(K=Q.next()).done);J=!0){var V=K.value;"target"===V.nodeName&&(r=V.textContent)}}catch(e){U=!0,G=e}finally{try{J||null==Q.return||Q.return()}finally{if(U)throw G}}}}}catch(e){A=!0,R=e}finally{try{q||null==B.return||B.return()}finally{if(A)throw R}}}else if(0===E.id.indexOf("_meta_")){var W=!0,Y=!1,Z=void 0;try{for(var $,ee=E.childNodes[Symbol.iterator]();!(W=($=ee.next()).done);W=!0){var te=$.value;if("segment"===te.nodeName){var re=!0,ne=!1,ae=void 0;try{for(var ie,le=te.childNodes[Symbol.iterator]();!(re=(ie=le.next()).done);re=!0){var oe=ie.value;"target"===oe.nodeName&&(o=Object.assign(o,a()({},"".concat(E.id.replace("_meta_","")),oe.textContent)))}}catch(e){ne=!0,ae=e}finally{try{re||null==le.return||le.return()}finally{if(ne)throw ae}}}}}catch(e){Y=!0,Z=e}finally{try{W||null==ee.return||ee.return()}finally{if(Y)throw Z}}}}}catch(e){w=!0,j=e}finally{try{O||null==g.return||g.return()}finally{if(w)throw j}}}}}catch(e){v=!0,y=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw y}}}}}catch(e){f=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(f)throw u}}i.addEventListener("click",function(e){r=wp.blocks.parse(r),wp.data.dispatch("core/editor").resetBlocks([]),wp.data.dispatch("core/editor").insertBlocks(r),wp.data.dispatch("core/editor").editPost({title:t});var n=wp.data.select("core/editor").getEditedPostAttribute("meta");for(var i in o)wp.data.dispatch("core/editor").editPost({meta:l()({},n,a()({},i,o[i]))})})},t.readAsText(e[0])}(e.target.files),e.target.files?n({hasFile:!0}):n({hasFile:!1})}}),Object(o.createElement)("p",null,r?i:Object(o.createElement)(v,null,i))))});return Object(o.createElement)(f,{className:"rrze-xliff-export-and-import"},Object(o.createElement)("div",null,x("XLIFF:","rrze-xliff")," ",Object(o.createElement)(i,null)," ",Object(o.createElement)(c,null)))}})}]);